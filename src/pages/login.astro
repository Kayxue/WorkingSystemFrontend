---
import Layout from '../layouts/Layout.astro';
import Navbar from '../components/Navbar.solid.jsx';
import LoginForm from '../components/LoginForm.solid.tsx';

const user = Astro.locals.authData?.user;
const isLoggedIn = Astro.locals?.authData?.loggedIn;
const currentYear = new Date().getFullYear();
---

<Layout title="WorkNow - 登入">
  {isLoggedIn ? (
    <main class="flex justify-center items-center min-h-[calc(100vh-4.5rem)] py-8 px-2 sm:px-4 bg-gray-50">
      <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md text-center">
        <h1 class="mb-6 text-gray-800 text-2xl font-bold">歡迎回來，{user.employerName}！</h1>
        <p class="text-gray-600">您已經登入了。</p>
      </div>
    </main>
  ) : (
    <main class="flex justify-center items-center min-h-[calc(100vh-4.5rem)] py-8 px-2 sm:px-4 bg-gray-50">
      <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md text-center">
        <h1 class="mb-6 text-gray-800 text-2xl font-bold">登入 WorkNow</h1>
        <LoginForm client:load />
        <p class="mt-6 text-sm text-gray-600">
          還沒有帳號嗎？ <a href="/register" class="text-blue-600 hover:underline">立即註冊</a>
        </p>
      </div>
    </main> 
  )}
  <footer class="bg-gray-800 text-white text-center py-6 w-full sm:py-8 text-xs sm:text-sm">
    <div>
      <p class="m-0">&copy; {currentYear} WorkNow. 保留所有權利。</p>
    </div>
  </footer>
</Layout>
